<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIST OF CARS</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Open+Sans:wght@300&display=swap"
        rel="stylesheet">
</head>

<script>
    "use strict";
    /*** REGION 1 - Global variables - VÃ¹ng khai bÃ¡o biáº¿n, háº±ng sá»‘, tham sá»‘ TOÃ€N Cá»¤C */
    // CAR_DB: máº£ng chá»©a danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng Ã´ tÃ´ (car)
    var gListCars = [
        {
            brand: "Ford", model: "Explorer", year: 2017, color: "white", carImg: "images/cars/ford_explorer_2017.png",
            vID: "AB-10111", owner: "Morris Mccoy", ownerAvatar: "images/owners/morris_mccoy.jpg"
        },
        {
            brand: "Toyota", model: "Corolla", year: 2018, color: "silver", carImg: "images/cars/toyota_corolla_2018.png",
            vID: "DN-23218", owner: "Claire Robertson", ownerAvatar: "images/owners/claire_robertson.jpg"
        },
        {
            brand: "Mazda", model: "Mazda 6", year: 2020, color: "red", carImg: "images/cars/mazda_2020_red.png",
            vID: "TZ-23212", owner: "Ted Hawkins", ownerAvatar: "images/owners/ted_hawkins.jpg"
        },
        {
            brand: "Toyota", model: "Fortuna", year: 2016, color: "black", carImg: "images/cars/toyota-fortuner_black.png",
            vID: "IN-91925", owner: "Juanita Bell", ownerAvatar: "images/owners/juanita_bell.jpg"
        },
        {
            brand: "Honda", model: "Civic", year: 2020, color: "black", carImg: "images/cars/honda_civic_2020.png",
            vID: "MN-44593", owner: "Clevaio Simon", ownerAvatar: "images/owners/clevaio_simon.jpg"
        }
    ];

    /*** REGION 2 - VÃ¹ng gÃ¡n / thá»±c thi hÃ m xá»­ lÃ½ sá»± kiá»‡n cho cÃ¡c elements */

    /*** REGION 3 - Event handlers - VÃ¹ng khai bÃ¡o cÃ¡c hÃ m xá»­ lÃ½ sá»± kiá»‡n */
    function onPageLoading() {
        // Code Ä‘á»ƒ cháº¡y thá»­ test hÃ m getCarByIndex()
        var vCarA = getCarByIndex(1); // hÃ m nÃ y tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng
        console.log("Car found by getCarByIndex, index = " + 1);
        console.log(vCarA.brand);
        console.log(vCarA.model);
        console.log(vCarA.color);
        //áº©n pháº§n not found
        var vDivNotFound = document.getElementById("div-not-found");
        vDivNotFound.style.display = "none";

        //hiá»ƒn thá»‹ danh sÃ¡ch car
        displayListCars(gListCars);
    }
    
    // hÃ m thá»±c hiá»‡n sá»± kiá»‡n nÃºt TÃ¬m kiáº¿m click
    function onBtnSearchCarClick() {
        // láº¥y biá»ƒn sá»‘ cáº§n tÃ¬m kiáº¿m
        var vSearchVIdInput = document.getElementById("input-search-vid");
        var vSearchVId = vSearchVIdInput.value.trim();
        /** báº¡n hÃ£y hoÃ n thiá»‡n tiáº¿p quÃ¡ trÃ¬nh tÃ¬m kiáº¿m */
        //cáº£nh bÃ¡o náº¿u khÃ´ng nháº­p
        if (vSearchVId == "") {
            alert("Pháº£i nháº­p vÃ o dá»¯ liá»‡u tÃ¬m kiáº¿m");
        } else {//cÃ³ nháº­p thÃ¬ má»›i tÃ¬m kiáº¿m
            var vResult = getCarByVId(vSearchVId);//tÃ¬m kiáº¿m car
            //xá»­ lÃ½ káº¿t quáº£ tÃ¬m kiáº¿m

            var vDivListCars = document.getElementById("div-list-cars");
            var vDivNotFound = document.getElementById("div-not-found");
            if (vResult == null) {
                vDivListCars.style.display = "none";//áº©n vÃ¹ng car
                vDivNotFound.style.display = "block";//hiá»ƒn vÃ¹ng notfound
            } else {
                vDivListCars.style.display = "block";//hiá»‡n vÃ¹ng car
                vDivNotFound.style.display = "none";//áº©n vÃ¹ng notfound
                
                vDivListCars.innerHTML = getCarHtml(vResult);//hiá»ƒn thá»‹ ná»™i dung car
            }
        }
    }
    
    /*** REGION 4 - Common funtions - VÃ¹ng khai bÃ¡o hÃ m dÃ¹ng chung trong toÃ n bá»™ chÆ°Æ¡ng trÃ¬nh */
    /* Ä‘Ã¢y lÃ  01 function Ä‘Ã£ tráº£ láº¡i object car bá»Ÿi index.
     báº¡n hÃ£y tham kháº£o cÃ¡ch tráº£ láº¡i khi tÃ¬m tháº¥y vÃ  khÃ´ng tÃ¬m tháº¥y */
    function getCarByIndex(paramIndexOfCar) {
        var vResult = null;//máº·c Ä‘á»‹nh = null (ko tÃ¬m tháº¥y)
        if (paramIndexOfCar >= 0 && paramIndexOfCar <= gListCars.length - 1) {//náº¿u tÃ¬m tháº¥y thÃ¬ gÃ¡n láº¡i giÃ¡ trá»‹
            vResult = gListCars[paramIndexOfCar];
        }

        return vResult;
    }

    /* báº¡n hÃ£y viáº¿t function tráº£ láº¡i car object dá»±a vÃ o VID
     gá»£i Ã½ tÃ¬m kiáº¿m "while loop javascript" */
    function getCarByVId(paramCarVId) {
        var vResult = null;//biáº¿n chÆ°a káº¿t quáº£
        var vFound = false;//Ä‘Ã¡nh dáº¥u tÃ¬m Ä‘Æ°á»£c hay chÆ°a
        var vIndex =0;//duyá»‡t pháº§n tá»­
        //duyá»‡t khi chÆ°a tÃ¬m tháº¥y (vFound = false) vÃ  cÃ²n pháº§n tá»­ (vIndex <length-1)
        while (vFound == false && vIndex < gListCars.length - 1) {
            if (gListCars[vIndex].vID == paramCarVId) {
                vResult = gListCars[vIndex];//gÃ¡n giÃ¡ trá»‹ car
                vFound = true;//Ä‘Ã¡nh dáº¥u tÃ¬m tháº¥y Ä‘á»ƒ thoat vÃ²ng láº·p
            } else {
                vIndex++;//Ä‘á»ƒ duyá»‡t pháº§n tá»­ tiáº¿p theo
            }
        }

        return vResult;
    }
    
    //hÃ m hiá»ƒn thá»‹ danh sach car
    function displayListCars(paramListCars) {
        //B1: truy suáº¥t vÃ o pháº§n tá»­ cha vÃ  reset dá»¯ liá»‡u
        var vDivListCars = document.getElementById("div-list-cars");
        vDivListCars.innerHTML = "";

        //B2: duyá»‡t máº£ng danh sÃ¡ch, má»—i pháº§n tá»­ thÃ¬ táº¡o 1 car
        for (var bI = 0; bI < paramListCars.length; bI++) {
            var bCarHtml = getCarHtml(paramListCars[bI]);//táº¡o ra html cá»§a 1 car
            vDivListCars.innerHTML += bCarHtml;//thÃªm vÃ o pháº§n tá»­ cha
        }
    }

    //hÃ m tráº£ vá» html cá»§a 1 Ä‘á»‘i tÆ°á»£ng car
    function getCarHtml(paramCar) {
        return `<div class="car">
            <div class="left-content">
                <img src="${paramCar.carImg}" alt="img">
            </div>
            <div class="right-content">
                <div class="right__header">
                    <div class="right__brand">${paramCar.brand}</div>
                    <div class="right__model">${paramCar.model}</div>
                    <div class="right__vid">${paramCar.vID}</div>
                </div>
                <div class="right__title">
                    ${paramCar.brand} - ${paramCar.model} - ${paramCar.year} - ${paramCar.color}
                </div>
                <div class="right__footer">
                    <div class="footer__owner">
                        <div class="avatar">
                            <img src="${paramCar.ownerAvatar}" alt="">
                        </div>
                        <div class="owner-name">${paramCar.owner}</div>
                    </div>
                    <div class="footer__readmore">
                        View detail ðŸ¡¢
                    </div>
                </div>
            </div>
        </div>`;
    }
</script>

<body onload="onPageLoading()">
    <div class="search-section">
        <div class="search__title">
            á»¨NG Dá»¤NG TÃŒM KIáº¾M Ã” TÃ”
        </div>
        <div class="search-box">
            <div class="search__label">Nháº­p VID</div>
            <div class="search__input">
                <input type="text" placeholder="Nháº­p biá»ƒn sá»‘ ..." id="input-search-vid">
            </div>
            <div class="search__button">
                <button onclick="onBtnSearchCarClick()">TÃ¬m kiáº¿m</button>
            </div>
        </div>
    </div>
    <div class="list-cars" id="div-list-cars">
        <div class="car">
            <div class="left-content">
                <img src="images/cars/ford_explorer_2017.png" alt="img">
            </div>
            <div class="right-content">
                <div class="right__header">
                    <div class="right__brand">FORD</div>
                    <div class="right__model">Explorer</div>
                    <div class="right__vid">AB-10111</div>
                </div>
                <div class="right__title">
                    Ford - Explorer - 2017 - White
                </div>
                <div class="right__footer">
                    <div class="footer__owner">
                        <div class="avatar">
                            <img src="images/owners/claire_robertson.jpg" alt="">
                        </div>
                        <div class="owner-name">Claire Robertson</div>
                    </div>
                    <div class="footer__readmore">
                        View detail ðŸ¡¢
                    </div>
                </div>
            </div>
        </div>
    
    </div>
    <div class="not-found" id="div-not-found">
        <img src="images/not-found.png" width="15%" alt="">
        <div class="not-found__text">
            KhÃ´ng tÃ¬m tháº¥y Ã´ tÃ´ nÃ o vá»›i VID Ä‘Ã£ nháº­p
        </div>
    </div>
</body>

</html>